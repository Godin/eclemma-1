parameters:
- name: 'Eclipse versions'
  type: object
  default:
  - 4.18

jobs:
- ${{ each eclipseVersion in parameters['Eclipse versions'] }}:
  - job:
    displayName: ${{ format('Eclipse {0}', eclipseVersion) }}
    pool:
      vmImage: ubuntu-16.04
    steps:
    - task: JavaToolInstaller@0
      inputs:
        versionSpec: '11'
        jdkArchitectureOption: 'x64'
        jdkSourceOption: 'PreInstalled'
    - bash: |
        mvn -V -B -e verify -P e${{ eclipseVersion }}
#        sudo apt-get update
#        sudo apt-get install metacity
#        export DISPLAY=:99.0
#        Xvfb :99 &
#        sleep 5
#        metacity --sm-disable --replace 2> metacity.err &
#        mvn -V -B -e verify -P e${{ eclipseVersion }} -DskipUITests=false
      displayName: Build
